# Практична робота 9

## Завдання 1
**Опис:**
Напишіть програму, яка читає файл /etc/passwd за допомогою команди getent passwd, щоб дізнатись, які облікові записи визначені на вашому комп'ютері.
Програма повинна визначити, чи є серед них звичайні користувачі (ідентифікатори UID повинні бути більші за 500 або 1000, залежно від вашого дистрибутива), окрім вас.

**Як працює:**
Програма викликає getent passwd через popen(), зчитує всі рядки, розбиває їх на поля, аналізує UID кожного користувача. Якщо UID відповідає критерію звичайного користувача і це не поточний користувач, ім'я виводиться на екран. В кінці програма повідомляє, якщо таких користувачів не знайдено.

- [Код до завдання](t1/main.c)
- ![Зображення](t1/result.png)

### Результат роботи

Виводиться список звичайних користувачів (UID > 500 або 1000), окрім поточного, або повідомлення, що таких немає.

---
## Завдання 2
**Опис:**
Напишіть програму, яка виконує команду cat /etc/shadow від імені адміністратора, хоча запускається від звичайного користувача.
(Ваша програма повинна робити необхідне, виходячи з того, що конфігурація системи дозволяє отримувати адміністративний доступ за допомогою відповідної команди.)

**Як працює:**
Програма через popen() викликає команду з правами root (наприклад, через sudo), намагається зчитати вміст /etc/shadow. Якщо доступ дозволено, вміст виводиться на екран, інакше - повідомлення про помилку доступу.

- [Код до завдання](t2/main.c)
- ![Зображення](t2/result.png)

### Результат роботи

Виводиться вміст /etc/shadow або повідомлення про відмову у доступі.

---
## Завдання 3
**Опис:**
Напишіть програму, яка від імені root копіює файл, який вона перед цим створила від імені звичайного користувача. Потім вона повинна помістити копію у домашній каталог звичайного користувача.
Далі, використовуючи звичайний обліковий запис, програма намагається змінити файл і зберегти зміни. Що відбудеться?
Після цього програма намагається видалити цей файл за допомогою команди rm. Що відбудеться?

**Як працює:**
Програма створює файл від імені звичайного користувача, потім через root-обліковий запис копіює його у домашній каталог користувача. Далі, під звичайним користувачем, намагається змінити та видалити файл, фіксує результат кожної операції.

- [Код до завдання](t3/main.c)
- ![Зображення](t3/result.png)

### Результат роботи

Виводяться повідомлення про успішність при зміні та видаленні файлу.

---
## Завдання 4
**Опис:**
Напишіть програму, яка по черзі виконує команди whoami та id, щоб перевірити стан облікового запису користувача, від імені якого вона запущена.
Є ймовірність, що команда id виведе список різних груп, до яких ви належите. Програма повинна це продемонструвати.

**Як працює:**
Програма через system() викликає whoami та id, виводить ім'я поточного користувача та список груп, до яких він належить. Це дозволяє побачити, під яким обліковим записом і з якими правами виконується програма.

- [Код до завдання](t4/main.c)
- ![Зображення](t4/result.png)

### Результат роботи

Виводиться ім'я користувача та перелік груп, до яких він належить.

---
## Завдання 5
**Опис:**
Напишіть програму, яка створює тимчасовий файл від імені звичайного користувача. Потім від імені суперкористувача використовує команди chown і chmod, щоб змінити тип володіння та права доступу.
Програма повинна визначити, в яких випадках вона може виконувати читання та запис файлу, використовуючи свій обліковий запис.

**Як працює:**
Програма створює файл, змінює його власника та права через chown і chmod, потім під звичайним користувачем намагається читати і записувати у файл. Виводить повідомлення про успішність або помилки кожної операції, пояснює.

- [Код до завдання](t5/main.c)
- ![Зображення](t5/result.png)

### Результат роботи

Виводяться результати спроб читання і запису файлу під різними правами.

---
## Завдання 6
**Опис:**
Напишіть програму, яка виконує команду ls -l, щоб переглянути власника і права доступу до файлів у своєму домашньому каталозі, в /usr/bin та в /etc.
Продемонструйте, як ваша програма намагається обійти різні власники та права доступу користувачів, а також здійснює спроби читання, запису та виконання цих файлів.

**Як працює:**
Виводить права доступу до файлів у домашній директорії, /usr/bin і /etc. Потім перевіряє, чи можна читати, писати або виконувати файли /etc/passwd, /etc/shadow, /usr/bin/ls, /usr/bin/cc.

- [Код до завдання](t6/main.c)
- ![Зображення](t6/result.png)

### Результат роботи

Показує ls -l для кількох директорій і звітує, які права (read/write/execute) має користувач на 4 ключові системні файли.

---
## Individual
**Опис:**
18. Побудуйте сценарій, де користувач має доступ до конфіденційної інформації через тимчасові файли.

**Як працює:**
Root створює конфіденційний файл з правами лише на запис (0200), а потім створює його копію з правами читання для звичайного користувача (0644). Якщо програму запускає UID=1000, вона намагається прочитати обидва файли.

- [Код до завдання](individual/main.c)
- ![Зображення](individual/result.png)

### Результат роботи
Root створює секретний файл із обмеженими правами (доступ лише до запису, без читання — -w-------).

Потім він копіює цей файл для тимчасової обробки — наприклад, передає іншому процесу або користувачу.

Копія має права 0644, тобто звичайний користувач (UID 1000) може її прочитати.

Користувач читає копію — отримає доступ до конфіденційної інформації.